# Agents.md Guide for OpenAI Codex — Airborne LiDAR Classification

This `AGENTS.md` file provides detailed instructions and expectations for AI agents (such as OpenAI Codex) collaborating on this geospatial data analysis repository.

## Project Structure for Codex

* `/src`: Main source code

  * `/preprocessing`: Point cloud preprocessing modules (denoising, outlier removal, normalization)
  * `/traditional_methods`: Geometric filtering algorithms (CSF, PMF, SMRF)
  * `/ml_models`: Machine learning models (e.g., PointNet++, RandLA-Net)
  * `/evaluation`: Metrics and visualization utilities
* `/notebooks`: Exploratory notebooks using components from `/src`
* `/config`: JSON configuration files for PDAL pipelines
* `/data`: Input and output `.las`/`.laz` files (excluded via `.gitignore`)
* `/tests`: Unit tests for critical processing functions

## Codex Coding Guidelines

### Language & Style

* Use **Python 3.9+**
* Follow [PEP8](https://peps.python.org/pep-0008/) conventions
* Prefer **typed function definitions** (`def func(x: int) -> str:`)
* Always add **docstrings** using NumPy-style or Google-style format
* Use **`logging`** instead of print for pipeline/debug outputs

### File Organization

* Group similar logic into appropriate submodules (`src/preprocessing/`, `src/ml_models/`, etc.)
* Scripts for execution (e.g., matching, training) should go in `/scripts` or notebooks
* Avoid hardcoded paths; use relative or config-driven paths (`os.path`, `Pathlib`)

## Testing Conventions

OpenAI Codex should use `pytest` for tests in `/tests`.

```bash
# Run all tests
pytest

# Run specific test file
pytest tests/test_denoise.py

# With coverage
pytest --cov=src
```

* Prefer **synthetic test files** (low-density `.las`) stored in `tests/assets/`
* Use `laspy` or `pdal` pipelines to mock I/O operations

## Pull Request Workflow for Codex

When OpenAI Codex contributes a PR, ensure it:

1. Has a meaningful description and purpose
2. Includes new or updated unit tests
3. Passes all tests and linting
4. Uses relative file paths or configuration-driven I/O
5. Adds logging and docstrings for traceability

## Static & Programmatic Checks

Before merging any code generated by Codex:

```bash
# Linting
flake8 src/ --max-line-length=100

# Type checking
mypy src/

# Code formatting
black src/

# Run tests
pytest --cov=src
```

## Project-Specific Notes for Codex

* Codex should prioritize reproducibility and modularity
* PDAL pipelines must be defined in JSON and loaded programmatically
* Codex must avoid syncing large `.las` files — use `.gitignore` appropriately
* Visualization should use Open3D or Matplotlib (no web components)
* Notebooks should avoid printing full arrays — summarize with `np.unique`, `np.percentile`, etc.

---

This document ensures Codex operates within the structure, conventions, and domain-specific expectations of the **Airborne-LiDAR-Classification** project.
